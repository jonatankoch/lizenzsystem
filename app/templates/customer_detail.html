{% extends "base.html" %}

{% block title %}Kunde {{ customer.name }}{% endblock %}

{% block content %}
<h1 class="mb-3 d-flex justify-content-between align-items-center">
  <span>{{ customer.name }}</span>
  <div>
    <a href="/customers/{{ customer.id }}/edit" class="btn btn-outline-primary me-2">Bearbeiten</a>
    <a href="/customers/{{ customer.id }}/delete" class="btn btn-outline-danger">Löschen</a>
  </div>
</h1>



<div class="card mb-4">
  <div class="card-body">
    <p><strong>Kundennummer:</strong> {{ customer.customer_number }}</p>
    <p><strong>Ansprechpartner:</strong> {{ customer.contact_name or "-" }}</p>
    <p><strong>E-Mail:</strong> {{ customer.contact_email or "-" }}</p>
    <p><strong>Telefon:</strong> {{ customer.contact_phone or "-" }}</p>
    <p><strong>Notizen:</strong><br>{{ customer.notes or "-" }}</p>
  </div>
</div>

<h2 class="h4 mb-3">Lizenzen dieses Kunden</h2>

{% if customer.licenses %}
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Produkt</th>
        <th>Lizenzschlüssel</th>
        <th>Sitze</th>
        <th>Start</th>
        <th>Ende</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for lic in customer.licenses %}
      <tr>
        <td><a href="/products/{{ lic.product.id }}">{{ lic.product.name }}</a></td>
        <td><a href="/licenses/{{ lic.id }}">{{ lic.license_key or "-" }}</a></td>
        <td>{{ lic.seats or "-" }}</td>
        <td>{{ lic.start_date or "-" }}</td>
        <td>{{ lic.end_date or "-" }}</td>
        <td>{{ lic.status or "-" }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <div class="alert alert-info">Dieser Kunde hat noch keine Lizenzen.</div>
{% endif %}

<a href="/customers" class="btn btn-secondary mt-3">Zurück zur Kundenübersicht</a>
{% endblock %}
